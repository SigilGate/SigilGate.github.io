---
title: "Разбираю документацию — и немного мечтаю"
slug: "разбираю-документацию-и-немного-мечтаю"
date: 2026-02-04T00:00:00+00:00
draft: false
summary: "Переношу документацию из приватного репозитория на сайт. По дороге — размышления о том, куда все это движется и какие вызовы нас ждут."
tags: ["архитектура", "документация", "размышления"]
---

У меня скопился хаос.

За время работы над прототипом сети — поиска рабочих решений, экспериментов с протоколами, настройки узлов — в приватном репозитории образовалась свалка. Учетные данные, скрипты автоматизации, архитектурная документация, макеты сайтов-прикрытий, исследования, заметки. Все в одном месте. Классический монорепозиторий, в котором со временем становится невозможно ориентироваться: часть информации устаревает, часть публична, часть — нет, границы размыты.

Стало очевидно, что с этим надо что-то делать.

Я создал отдельную организацию на GitHub — прежде всего для того, чтобы распилить этот монолит на специализированные репозитории. Данные — отдельно. Скрипты управления — отдельно. Гайды и мануалы — отдельно от исследований и учетных данных. Часть репозиториев останется приватной, часть станет публичной.

Для публичной части — сайт на GitHub Pages: документация, блог, раздел «О проекте». И легкие каналы коммуникации — не только через GitHub (все-таки достаточно узкоспециализированная площадка), но и через мессенджеры и соцсети. Я также планирую периодически обобщать наиболее удачные мысли из блога в полноценные статьи — для площадок вроде Хабра, Дзена, Medium. Развивать отдельные посты до размеров статьи или объединять несколько по итогам месяца.

Сейчас я занимаюсь переносом документации из приватного репозитория на сайт. И вот что происходит, когда разбираешь архитектурные схемы верхнего уровня.

## Когда перечитываешь — начинаешь видеть

Когда работаешь с документацией — особенно с верхнеуровневой, архитектурной, не уходя глубоко в детали, а на уровне функционирования системы в целом — тянет немного пофантазировать. Представить, а как бы это могло работать в тех или иных условиях. Что если масштабировать. Что если объединить с чем-то. Что если ситуация изменится.

К тому же, перечитывая и делая правки — иногда вдруг начинаешь более четко понимать то, что в самом начале чувствовал только на уровне ощущений. Приходят формулировки. Появляются детали, которых в начале не было, но они подразумевались — или должны были появиться.

У меня все еще весьма размытое представление о том, как будут реализованы многие вещи: система хранения данных, управление сущностями внутри сети. Однако именно эта незавершенность делает возможным немного помечтать и представить будущее развитие проекта — в тех частях, где пока еще белый лист.

## Где мы сейчас

Сейчас наша сеть функционирует на уровне узлов и протоколов. И это уже большое достижение.

Мы преодолели множество организационных и технических трудностей. Рассмотрели несколько протоколов и видов транспорта, используемых для построения приватных сетей с акцентом на защиту от обнаружения. Не все эксперименты заканчивались успешно — исследования на то и исследования. В результате мы нашли техническое решение, позволяющее обходить блокировки и проходить незаметно через средства обнаружения.

Этого уже достаточно, чтобы построить свой небольшой частный VPN-сервис. И это победа.

Но это всего лишь один маленький шаг. Потому что вызовы, которые перед нами стоят, намного серьезнее.

## Настоящий вызов

В текущей ситуации — регионализация интернета, усиление регулятивного контроля — основной вызов заключается даже не в том, чтобы найти работающий стек технологий или сетевых протоколов для обхода блокировок. Они, так или иначе, будут появляться. VLESS был, пожалуй, одним из первых широко распространившихся решений подобного рода — но рано или поздно и он будет сломан, и что-то более новое придет ему на смену. Это вечная борьба меча и щита. Уже сейчас видна работа в этом направлении: многие игроки на рынке VPN-услуг развивают собственные решения и некоторые даже выкладывают их в опенсорс (например, недавно вышедший протокол TrustTunnel).

Но основной вызов стоит не в том, чтобы защитить соединение и спрятать его с технической точки зрения, замаскировав под обычный интернет-трафик. Технически для этого есть все средства — и пока не найдено стопроцентных способов их дискредитации.

**Основной вызов — сделать это соединение статистически невидимым.** Не выделяющимся из обычного интернет-трафика.

И с этой точки зрения, все схемы, которые работали раньше — арендовать сервер за рубежом по цене чашки кофе, прокинуть до него защищенный канал и получить свой приватный VPN — больше не работают. Такие каналы будут вычислены и заблокированы довольно скоро. И в будущем, с развитием систем и техник DPI, срок их обнаружения и компрометации будет только уменьшаться.

Чтобы спрятать трафик теперь — его недостаточно завернуть в туннель. Его надо еще и замаскировать под обычный трафик и сделать возможность его статистического обнаружения математически ничтожной.

## Какие есть выходы

Их, как видится, несколько.

### Избирательная маршрутизация на клиенте

Первый принцип — правильная настройка клиента. Доступ к разрешенным ресурсам идет напрямую, к ограниченным — через защищенную сеть. Никакого «весь трафик в туннель». Чем меньше трафика проходит через VPN — тем менее заметен сам факт его существования.

### Непрерывная ротация

Второй принцип — ротация адресов, эндпоинтов, доменов. И здесь есть варианты.

**Лучший из возможных** — когда у вас есть собственные сети эндпоинтов (сайтов или сервисов) на зарубежных площадках и некоторое количество интернет-трафика, не блокируемого регулятором. Тогда вполне можно добавить в этот трафик еще и VPN-сервис — и внешне все будет выглядеть достаточно легитимно. Просто еще один запрос к популярному ресурсу. Если хочешь спрятать дерево — спрячь его в лесу. Так что — развиваем стартапы и цифровые платформы, поднимаем трафик, доводим органику до стабильного уровня — и можно жить, не вызывая подозрений. Пока до вашего ресурса не добрались требования по принудительному приземлению в конкретной юрисдикции.

**На уровне индивидуального использования** — минимум: автоматическая ротация узлов сети, ротация эндпоинтов, использование множества доменов для маскировки. Это первое, что приходит на ум, и минимальное из того, что можно сделать.

### Развитие сети

Следующее, что приходит на ум — привлечение новых участников. Развитие собственной сети. (Сейчас мы находимся здесь.)

Ситуация win-win: новые участники приносят новые эндпоинты, эндпоинты делятся и ротируются между участниками, создавая вариабельность путей, существенно затрудняющую какой-либо статистический анализ. Новые участники свободно добавляются и свободно исчезают.

Здесь тоже есть несколько направлений:

- **Равноправное участие** — объединение в партнерскую программу, формирование общей сети. Это возможно, пожалуй, при достаточно аффилированных участниках с высокой степенью связанности: организации одной структуры, члены клуба, родственники. Участники, имеющие между собой достаточно тесные связи, чтобы суметь внутренне организоваться и поддерживать эту организованность.
- **Оказание услуг** — привлечение клиентов, организация небольших сетей, реклама через сарафанное радио и закрытые сообщества.
- **Объединение на уровне сетей** — партнерская программа обмена трафиком между независимыми сетями.

## Что для этого нужно

Масштабируемость. Легкость развертывания и администрирования. Управление узлами и пользователями. Автоматизация. Адаптивность. Возможность присоединять узлы и быстро перестраиваться — вплоть до полного распада и развертывания всей инфраструктуры с нуля, с сохранением информации об узлах и пользователях.

И конвейерная генерация контента: фабрики по производству эндпоинтов — сайтов и сервисов, псевдореалистичных (что уже не выглядит утопией при нынешнем уровне развития нейросетей) или находящихся в продакшене. Для прикрытия и маскировки.

## А при чем тут документация

Осознанно или нет — но все эти принципы закладывались или закладываются в архитектуру **Sigil Gate**. Что-то реализовано, а что-то еще предстоит реализовать. Какие-то технические решения уже найдены, а где-то еще простор для экспериментов.

И именно об этом я думал, пока переносил документацию.
