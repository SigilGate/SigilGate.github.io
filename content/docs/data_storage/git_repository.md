---
title: "Git-репозиторий"
description: "Приватный Git-репозиторий как источник истины и механизм восстановления сети"
summary: "Источник истины — версионирование, аудит изменений, полное восстановление сети с нуля"
weight: 30
---

{{< lead >}}
Приватный Git-репозиторий — единственный источник истины (Source of Truth) для сети **Sigil Gate**. Хранит желаемое состояние инфраструктуры, обеспечивает версионирование, аудит и возможность полного восстановления сети с нуля.
{{< /lead >}}

## Роль в архитектуре

- **Восстановление** — при полной потере оперативной инфраструктуры сеть перестраивается из Git-репозитория.
- **Версионирование** — каждое изменение конфигурации фиксируется как коммит с возможностью отката.
- **Аудит** — история коммитов показывает, кто, когда и что изменил.
- **Декларативное управление** — репозиторий описывает, *какой должна быть* сеть; оперативные системы приводят реальное состояние в соответствие.

## Структура данных

В репозитории хранятся структурированные файлы (JSON / YAML):

| Категория | Содержимое |
|-----------|-----------|
| Описания узлов | Конфигурации Root-, Core-, Entry-нод (без секретов) |
| Топология | Связи между Core-нодами, правила привязки Entry-нод |
| Пользователи | Список пользователей и права доступа (без чистых учетных данных) |
| PKI | Метаданные сертификатов, статусы отзыва (CRL) |

{{< alert >}}
Git-репозиторий **никогда** не содержит приватные ключи, токены или пароли в открытом виде. Управление секретами осуществляется через PKI и KV-хранилище.
{{< /alert >}}

## Взаимодействие

| Узел | Роль |
|------|------|
| Root-нода | Извлекает конфигурацию при развертывании / восстановлении. Может фиксировать изменения. |
| Core-ноды | Периодически фиксируют оперативные изменения из KV в Git (KV → Git). Основной механизм непрерывного версионирования. |
| Entry-ноды | Нет доступа |

Core-ноды обеспечивают сохранность оперативных изменений даже при длительной неактивности Root-ноды.
